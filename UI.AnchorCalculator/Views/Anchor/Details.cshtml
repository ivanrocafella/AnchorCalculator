@model UI.AnchorCalculator.ViewModels.AnchorViewModel

<style>
    svg {
        max-width: 500px;
    }
</style>

<div class="card mb-3" style="max-width: 840px;" id="cardDetails">
  <div id="row_details" class="row g-0">
    <div class="col-md-8">
      <div class="img-fluid rounded-start"></div>
    </div>
    <div class="col-md-4">
      <div class="card-body">
        <div id="descript"><h5 class="card-title"># @Model.Anchor.Id</h5>
        <p class="card-text">Диаметр: @Model.Anchor.Diameter мм</p>
        <p class="card-text">Длина: @Model.Anchor.Length мм</p>
        <p class="card-text">Диаметр резьбы: @Model.Anchor.ThreadDiameter мм</p>
        <p class="card-text">Шаг резьбы: @Model.Anchor.ThreadStep мм</p>
        <p class="card-text">Длина резьбы: @Model.Anchor.ThreadLength мм</p>
        <p class="card-text">Длина загиба: @Model.Anchor.BendLength мм</p>
        <p class="card-text">Радиус загиба: @Model.Anchor.BendRadius мм</p>
        <p class="card-text" id="billetLength">Длина заготовки: @Math.Round(Model.Anchor.BilletLength, MidpointRounding.AwayFromZero) мм</p>
        <p class="card-text">Кол-во: @Model.Anchor.Quantity шт</p>
        <p class="card-text">Вес 1 шт: @Math.Round(Model.Anchor.Weight, 2) кг</p>
        <p class="card-text">Вес @Model.Anchor.Quantity шт: @Math.Round(Model.Anchor.BatchWeight, MidpointRounding.AwayFromZero) кг</p>
        <p class="card-text">Себестоимость: @Math.Round(Model.Anchor.Sebes, MidpointRounding.AwayFromZero) сом</p>
        <p class="card-text">Общая cебестоимость: @Math.Round(Model.Anchor.BatchSebes, MidpointRounding.AwayFromZero) сом</p>
        <p class="card-text">Цена: @Math.Round(Model.Anchor.Price, MidpointRounding.AwayFromZero) сом</p>
        <p class="card-text">Общая стоимость: @Math.Round(Model.Anchor.Amount, MidpointRounding.AwayFromZero) сом</p>
        <p class="card-text" id="material">Материал: @Model.MaterialName </p>
        <p class="card-text" id="author">Исполнитель: @Model.UserName</p>
        <p class="card-text"><small class="text-muted">Дата создания: @Model.Anchor.DateCreate</small></p></div>     
      </div>
    </div>
  </div>
<div class="btn-group" role="group" aria-label="Basic mixed styles example">
        <button type="button" class="btn btn-secondary" onclick="printDiv(row_details);">Печать бланка</button>
        <button type="button" class="btn btn-dark" onclick="printDiv(div_drawing);">Печать чертежа</button>
</div>
</div>

<div id="div_drawing" style="display:none">
    <div id="stampDrawing">
    </div>
    <div id="svgForDrawing">
    </div>
</div>

@section Scripts
{
   <script>

      document.addEventListener('DOMContentLoaded', function(){
           var id = @Model.Anchor.Id;
           $.ajax(
                  {
                      url: '@Url.Action("GetAnchorJsonResult", "Anchor")',
                      type: 'GET',
                      data: {'id': id},
                      success: function (response) {
                      if(response.success)
                      {
                           let divImg = document.getElementsByClassName("img-fluid")[0];
                           let svgForDrawing = document.getElementById("svgForDrawing");
                           svgForDrawing.innerHTML = response.anchor.svgElement;
                           divImg.innerHTML = response.anchor.svgElement;
                        }}})
            var author = document.getElementById("author").innerHTML;
            var material = document.getElementById("material").innerHTML;
            var billetLength = document.getElementById("billetLength").innerHTML;
            var listStamp = '<p class="card-text">' + material + '</p>' +
                '<p class="card-text">' + author + '</p>' +
                '<p class="card-text" > Визирующее лицо: </p>' +
                '<div style="position:fixed;bottom: 0;"><p class="card-text">1. Размер для справок</p>' +
                '<p class="card-text">2. ' + billetLength + '</p>' +
                '<p class="card-text">3. Поле допуска на диаметр резьбы 8q по ГОСТ 16093</p>' +
                '<p class="card-text">4. Оснастка: центр: палец 8; бок: палец 7 и оправка О1</p></div>';
            console.log(listStamp);
            var stampDrawing = document.getElementById("stampDrawing");
            stampDrawing.innerHTML = listStamp;
      });


   </script>

   <script type="text/javascript" src="~/js/print.js"></script>    
}